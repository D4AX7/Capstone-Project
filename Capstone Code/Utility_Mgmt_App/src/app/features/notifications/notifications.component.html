<div class="notifications">
	<div class="notifications__header">
		<h1>Notifications</h1>
		<div class="notifications__actions">
			<button mat-stroked-button color="primary" (click)="markAllRead()">Mark all read</button>
			<mat-form-field appearance="outline" class="notifications__filter">
				<mat-label>Filter</mat-label>
				<mat-select [(value)]="filterIsRead" (selectionChange)="load()">
					<mat-option [value]="undefined">All</mat-option>
					<mat-option [value]="false">Unread</mat-option>
					<mat-option [value]="true">Read</mat-option>
				</mat-select>
			</mat-form-field>
		</div>
	</div>

	<mat-progress-spinner *ngIf="loading" mode="indeterminate" diameter="40"></mat-progress-spinner>

	<mat-card *ngFor="let n of notifications" class="notifications__item" [class.notifications__item--read]="n.isRead">
		<mat-card-header>
			<mat-card-title>{{ n.title }}</mat-card-title>
			<mat-card-subtitle>{{ n.createdAt | date: 'medium' }}</mat-card-subtitle>
		</mat-card-header>
		<mat-card-content>
			<p>{{ n.message }}</p>
		</mat-card-content>
		<mat-card-actions>
			<button mat-button color="primary" (click)="markRead(n)" [disabled]="n.isRead">Mark read</button>
			<button mat-button color="warn" (click)="delete(n)">Delete</button>
		</mat-card-actions>
	</mat-card>

	<p *ngIf="!loading && notifications.length === 0">No notifications.</p>
</div>
